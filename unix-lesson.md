---
title: ＵＮＩＸ／ＬＩＮＵＸの基礎訓練
author: 西井淳
fontsize: 11pt
papersize: a4paper
twocolumn: true
listing: true
toc: true
geometry: width=15cm, height=20cm
---


# 基本操作

## 基本コマンド

1.  ターミナル上から `emacs` 等のアプリケーションを起動するとき，ターミナルを継続して利用できるように起動(バックグラウンド起動)するにはどうすればよいか?
2.  前問の起動オプションを忘れて，うっかりターミナル上から`emacs` を起動してしまった。その後emacsを終了すること無く，ターミナルも `emacs` も利用できるようにする方法は?
3. これまでに入力したコマンド履歴を表示する方法は?
3. あるプログラムと，それを少し修正したプログラムで，どこが違うかを知る方法は?
4. 現在いるディレクトリがどこか，その絶対パスを知る方法は?
5. あるディレクトリにコマンド`cd`で移動後，もとのディレクトリに戻るためのコマンドは? (`cd`に適切なオプションをつける)
6. ディスク使用量一覧を表示するコマンドは?
1. あるテキストファイルに含まれる文字数や行数を調べる方法は？
7. 日本語のテキストファイルの文字コードを判断する方法は?
8. EUCのテキストファイルの文字コードをUTF-8に変換する方法は?


## エディタ

プログラミングに利用するエディタで，以下のキーバインディング(ショートカットキー)を調べよ。

1. マウスカーソルを上下左右に動かす方法は?(矢印キー以外を使う)
1. 編集画面(パネル)を分割表示する方法は? また，分割表示をやめる方法は?
2. 分割した画面(パネル)間でカーソル移動する方法は?
3. 編集画面を複数開く方法は?また，減らす方法は?
4. コピー＆ペーストをするキー操作は？
5. カット＆ペーストをするキー操作は？
6.  読み込んだファイル中のある文字列を探すためのキー操作は(前方検索
    /後方検索)? さらに同じ文字列がある次の場所を探す方法は?
7.  ファイル中の特定の文字列を別の文字列に置換するためのキー操作は?


## マウス操作

1.  マウスで1単語(文節)のみ選択する方法は?
2.  マウスで選択した単語をペーストする方法は?

<!--
## プリンタ管理

1.  プリンタの稼働状況を知るコマンドは?
2.  プリンタジョブをキャンセルする方法は?
-->

## ファイル情報取得

1.  ファイル`math.h`がシステム上のどこにあるか，その一覧を表示するコマンドは?
2.  `ls`とタイプしたとき実行されるコマンドがどこのパスにあるかを知るためのコマンドは?

## エイリアス

1. em とタイプすると emacs が起動するようにエイリアスをつくりなさい。
2. 一時的にエイリアスを無効にしてemという名前のコマンドを実行する方法は？
3. 現在 em がどのようなエイリアスになっているかを確認する方法は？
4. ターミナル起動時に，自分が定義したエイリアスが有効になるようにするためには，どのような名称のファイルにエイリアスの定義を書き込んでおけば良い?
5. 作成したエイリアスemが不要ならば削除せよ。

## シンボリックリンク

1.  ディレクトリ `~/c` と `~/tmp` をつくりなさい。
2.  ディレクトリ`~/tmp` に移動せよ。
3.  ディレクトリ`~/c`へのシンボリックリンクをつくれ。
5.  `ls c`で，`~/c`以下を参照できることを確かめよ。
6.  `cd c`でシンボリックリンクの中へ移動できることを確かめよ。
7.  さらに，`cd ../` でもとのディレクトリ(`~/tmp`)に戻れることを確かめなさい。
8.  `~/tmp/c` を削除せよ。この時`~/c`は無くならないことを確認しなさい。
9.  最後に，ディレクトリ`~/tmp`と`~/c`を(不要なら)削除しなさい。

## リダイレクト・パイプ

以下をそれぞれ**コマンド行一行で解決する方法**を考えよ。

2.  `ls -lR`の出力をファイル`ls-lR`に書き込むにはどうしたらよいか?
3.  ファイル math.h から，文字列 PI を含む行を全て抜き出すにはどうしたらいい?
5.  あるファイルの，末尾から50行のみを less を使って見る方法は?
6.  あるファイルの，先頭から50行のみを less を使って見る方法は?
7.  CSV形式のファイルの2列目のみを抜き出して表示する方法は?
    (`$ man cut`参照)
    CSV形式とは以下の例のように，各行にデータを”,”で区切って保存するデータ形式である。
```
データx1, データy1, データz1
データx2, データy2, データz2
```
8.  以下のように2つのデータファイル(`data1.txt`, `data2.txt`)があるとする。
```
$ cat data1.txt
1
2
3
$ cat data2.txt
10
15
20
```
    これらの2つのデータファイルの各行をくっつけて以下のようなファイル
    (data3.txt)を出力する方法は? (\$ man paste 参照)
```
$ cat data3.txt
1 10
2 15
3 20
```

# 文字列置換と正規表現

ストリームエディタ`sed`を使うと，文字列の置換を簡単にできる。あるファイル中の文字列1を文字列2に置換した内容を出力したいときには以下を実行する。
```
$ sed -e "s/文字列1/文字列2/g" <ファイル名>
```
上記命令のgを省いたときには，各行で一番はじめにあった文字列1のみが文字列2に置換される。

1.  あるファイルの空白(スペース)を**すべて**削除する方法は?
2.  あるファイルの連続した5つの空白(スペース)をタブに置換して，その結果をファイルに保存する方法は?
3.  あるファイルの各行のはじめにある空白(スペース)およびタブを**すべて**削除する方法は?


# デスクトップ環境

X Window Systemが起動しなかったりフリーズした場合には，コンソール画面に移動して対応することが多い。

1.  コンソール画面に移動して(**X window は終了しないで**仮想コンソールに移動)，ログインしなさい。一般には，この後に「プロセス管理」で扱うジョブの確認や停止や，X Windowの設定を行うが，ここでは省く。
3.  `Ctrl-s` を押してみなさい。この後，そのコンソールでは入出力ができなくなるが，これを回復するにはどうしたらよいか?
5.  コンソールからログアウトしなさい。
6.  X window に復帰しなさい。



# プロセス管理

1. ターミナル上で `yes` とタイプせよ。これにより文字`y`が出力され続ける。これを以下の3通りの方法で停止しなさい。
    1.  強制終了のショートカット・キーにより停止する。
    2.   `yes` を実行したあと，別のターミナルでコマンド`yes`
        のプロセスID(PID)を `ps` と `grep` を用いて調べ(パイプ利用)，`kill` コマンドで yesを停止しなさい。
    3.   `yes`を再度実行したあと別のターミナルでコマンド`top`を用いて`yes`を停止せよ。
2.  `yes`のプロセスが同時にたくさん実行されているとき，コマンド名(`yes`)の指定によって， それらをまとめて`kill`する方法は?

<!--# rpmコマンド(Vine/Fedora Linux等でのコマンド)
以下をrpmコマンドを用いて調べる方法を述べなさい。

1.  コマンドlsを提供するrpmパッケージの名称を知る方法は?

2.  前問で調べたコマンドlsを提供するrpmパッケージに関する情報(説明)を知る方法は?

3.  lsを提供するrpmパッケージに含まれているファイル一覧を知る方法は?
-->

# aptコマンド(Ubuntu Linux等でのパッケージ管理)

1. あるパッケージをインストールするaptコマンドは? 実際にコマンド`lv`をインストールしてみなさい。
1. あるパッケージをアンインストールするaptコマンドは? 実際にコマンド`lv`をインストールしてみなさい。

1. インストールされているパッケージの一覧を表示するaptコマンドは?
2. インストールされているパッケージをまとめて最新状態にするaptコマンドは?
4. 指定したファイルがどのパッケージに含まれているかを確認する方法は?
5. 指定したパッケージに含まれるファイル一覧を表示する方法は?


# シェルスクリプトとパス設定

## 準備運動

1. 引数の数，第0引数，第1引数，全ての引数をそれぞれ表示する
   シェルスクリプト `arg.sh` を作って `arg.sh "a b" 3 a b` の出力が適切に引数を表示しているか確認しなさい。
2. arg.shをディレクトリ`~/bin`に置き，どこのディレクトリにいて も
    `arg.sh`を実行できるよう，パスの設定をせよ。

## ファイル圧縮

1. 指定ディレクトリを圧縮した`tar.bz2`ファイルをつくるシェルスクリプト`bzdir`をつくりなさい。
    すなわち`$ bzdir <directory name>`を実行すれば，
    `<directory name>.tar.bz2`が出来るスクリプトをつくりなさい。
    ただし，以下の仕様を満たすようにすること。

    1.  作成したプログラムの使用方法を表示してプログラムを終了する関数
        Usageを作成し，引数の数が1個でない時には，その関数Usageを呼び出す
        こと。

    2.  引数で与えた名前のディレクトリが存在しないときには，エラーメッセー
        ジを表示して終了

    3.  システムにあらかじめ用意されているコマンドbzip2dirは用いずに，
        tarを用いて実現すること。

3.  カレント・ディレクトリにあるディレクトリをそれぞれ圧縮するシェル
    スクリプト `bzdir2` をつくりなさい。(`c/`,`tex/`というディレクトリが
    あれば，`c.tar.bz2`,`tex.tar.bz2`をつくる。)

4.  引数に `<name>.tar.gz`といった `tar.gz`で終る名前を与え
    たときに，`<name>.tar.bz2`という名前を表示するシェルスクリプトを
    つくりなさい。

5.  現在いるディレクトリにgzipで圧縮されたファイル(\*.gz)があれば，
    bzip2 で圧縮したファイルに変換するスクリプトgz2bz2 をつくりなさい。
    変換前と変換後のファイルサイズも表示するようにしなさい。

# リモート操作


リモート接続先のマシンとして，自分のパソコンや隣の机のパソコンを用いて，以下の課題をしなさい。
以下では，リモート接続可能なマシン名を仮に venus と atlas とするが，実際に試すときには利用できるマシン名に適宜置き換えなさい。


## 他ホストへの接続

1.  `venus` に `ssh` でログインするスクリプト`connect`を作りなさい。

2.  `connect`を`~/bin`に置いて，以下のような名前のシンボリックリンクを`~/bin`内につくりなさい。

          venus -> connect
          atlas  -> connect

3.  `venus`とコマンドを打てばvenusに接続し，`atlas`と打てば`atlas`に接続するように，スクリプト`connect`を修正しなさい。


## リモートコピー

1. 自分のノートパソコンにあるCのプログラム(`hoge.c`とする)を, `venus`上の自分のホームに転送する方法は?
2. venus にあるファイル`hoge2.c`をvenusから自分のマシンに転送する方法は?
3. 実際に作成したプログラムを他のマシンに転送し，自分の計算機で実行した場合とどの程度実行時間が変わるか確認しなさい。


## アクセス権限

研究室ではNFSサーバheraに共用ディレクトリ `/home/public/`がある。
必要に応じたアクセス制限をかけながら，ファイルの共有を行うことができる。

1.  研究室のマシンにログインしなさい。

2.  `/home/public/tmp`以下に自分の名前のディレクトリ(仮に`pochi`とする)を作りなさい。

3.  `/home/public/tmp/pochi`にアクセス権限を持つヒトは誰かを確認する方法を述べなさい。
    また，このディレクトリの中のファイル一覧を参照できる権限を持つユーザ，中のファイル削除や名前変更等ができる権限を持つユーザ，中にcd できる権限を持つユーザがそれぞれどのようなユーザか述べなさい。

4.  `/home/public/tmp/pochi`に自分の作ったプログラム(dog.cとする)をなにか置いて，それに対して読み込み権限を持つヒト，書き換えや削除権限を持つヒトはそれぞれどのようなヒトか述べなさい。

5.  自分と同じグループに属するヒトが`/home/public/tmp/pochi/dog.c`を読み書きできるようにパーミションの
    設定する方法は?

# このドキュメントの著作権について

1.  本稿の著作権は西井淳[nishii@sci.yamaguchi-u.ac.jp](nishii@sci.yamaguchi-u.ac.jp)が有します。

2.  非商用目的での複製は許可しますが，修正を加えた場合は必ず修正点および加筆者の
    氏名・連絡先，修正した日付を明記してください。また本著作権表示の削除は行っ
    てはいけません。

3.  本稿に含まれている間違い等によりなんらかの被害を被ったとしても著者は一切
    責任を負いません。

間違い等の連絡や加筆修正要望等の連絡は大歓迎です。
