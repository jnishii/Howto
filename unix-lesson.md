---
title: ＵＮＩＸ／ＬＩＮＵＸの基礎訓練
author: 西井淳
fontsize: 11pt
papersize: a4paper
twocolumn: true
listing: true
toc: true
geometry: width=15cm, height=20cm  
---

# デスクトップ環境
## コンソール上で

ログイン後X window を起動し(大抵自動で起動する)、以下を順に行え。

1.  コンソール画面に移動して(**X window は終了しないで**仮想
    コンソールに移動)、ログインせよ。

2.  ’yes’ とタイプせよ。これにより文字’y’が出力され続ける。
    これを以下の3通りの方法で停止せよ。

    -   C-c で停止してみよ。

    -   ’yes’ を再起動したあと、別の仮想コンソールに移り、コマンド’yes’
        のプロセスID(PID)を ps と grep を用いて調べ、kill コマンドで yes
        を停 止せよ。

    -   ’yes’
        を再起動したあと、別の仮想コンソールに移り、コマンド’top’を
        用いて’yes’を停止せよ。

3.  C-s を押してみよ。この後、そのコンソールでは入出力ができな
    くなるが、これを回復するにはどうしたらよいか?

4.  yesがたくさん起動されているとき、yesコマンドの名前の指定によって
    まとめてkillする方法は?

5.  コンソールからログアウトせよ。

6.  X window に復帰せよ。

# UNIXコマンド・基本アプリケーション

## Emacs

1.  emacs を起動し、“ヘルプ/練習”を実行して基本操作を学びなさい。
    (チュートリアルで、ESC a などとあるのは、M-a でも同様に機能する)

2.  emacs の画面を上下に分割する方法は? また、分割表示をやめる方法は?

3.  emacs の編集画面を複数開く方法は?
    (**メモリを大量消費するので、emacsは複数起動しないこと**)

4.  編集中のプログラムのコンパイルをemacs 上から実行するキー操作は?

5.  emacs でコピー＆ペーストをするキー操作は？

6.  emacs でカット＆ペーストをするキー操作は？

7.  複数のファイルを読み込んでいる時、表示するファイルを変更する方法は?

8.  読み込んだファイル中のある文字列を探すためのキー操作は(前方検索
    /後方検索)? さらに同じ文字列がある次の場所を探す方法は?

9.  ファイル中の特定の文字列を別の文字列に置換するためのキー操作は?

## 基本コマンド

1.  ターミナル(kterm等)上から emacs を起動するとき、ターミナルも emacs
    も利用できるように起動するにはどうすればよいか?

2.  前問の起動オプションを忘れて，うっかりターミナル(kterm等)上から
    emacs を起動してしまった。その後emacsを終了すること無く，ターミナルも
    emacs も利用できるようにする方法は?

3.  あるプログラムと、それを少し修正したプログラムで、どこが違うかを知
    る方法は?

4.  現在いるディレクトリがどこか、その絶対パスを知る方法は?

5.  あるディレクトリにコマンド`cd`で移動後、もとのディレクトリ
    戻るにはどうしたらいい? (`cd`のオプションを利用する)

6.  ディスク使用率を表示するコマンドは?

1.  あるテキストファイルに含まれる文字数や行数を調べる方法は？

7.  日本語のテキストファイルの文字コードを判断する方法は?

8.  EUCのテキストファイルの文字コードをUTF-8に変換するには?

## マウス操作

1.  マウスで1単語(文節)のみ選択する方法は?

2.  マウスで選択した単語をペーストする方法は?

## プリンタ管理

1.  プリンタの稼働状況を知るコマンドは?

2.  プリンタジョブをキャンセルする方法は?

## ファイル情報取得

1.  ファイルmath.hがシステム上のどこにあるか、その一覧を表示するコマンドは?

2.  lsとタイプしたとき実行されるコマンドがどこのパスにあるかを知るためのコマンドは?

## エイリアス

1.  em とタイプすると emacs が起動するようにエイリアスをつくれ。

2.  一時的にエイリアスを無効にしてemという名前のコマンドを実行する方
    法は？

3.  現在 em がどのようなエイリアスになっているかを確認する方法は？

4.  作成したエイリアスemが不要ならば削除せよ。

## シンボリックリンク

1.  ディレクトリ `~/c` と `~/tmp` をつくりなさい。

2.  ディレクトリ`~/tmp` に移動せよ。

3.  ディレクトリ`~/c`へのシンボリックリンクをつくれ。

5.  `ls c`で、`~/c`以下を参照できることを確かめよ。

6.  `cd c`でシンボリックリンクの中へ移動できることを確かめよ。

7.  さらに、`cd ../` でもとのディレクトリ(`~/tmp`)に戻れること
    を確かめよ。

8.  `~/tmp/c` を削除せよ。この時`~/c`は無くならないことを確認せよ。

9.  最後に、ディレクトリ`~/tmp`と`~/c`を(不要なら)削除せよ。

## リダイレクト・パイプ

以下をそれぞれ**コマンド行一行で解決する方法**を考えよ。

2.  `ls -lR`の出力をファイル`ls-lR`に書き込むにはどうしたらよいか?
3.  ファイル math.h から、文字列 PI を含む行を全て抜き出すにはどうし
    たら良い?
5.  あるファイルの、末尾から50行のみを less を使って見るにはどうしたらよ
    いか?
6.  あるファイルの、先頭から50行のみを less を使って見るにはどうしたらよ
    いか?
7.  CSV形式のファイルの2列目のみを抜き出して表示するにはどうすればよいか? 
    (`$ man cut`参照)
    CSV形式とは以下の例のように、各行にデータを”,”で区切って保存するデー
    タ形式である。
```
データx1, データy1, データz1
データx2, データy2, データz2
```
8.  以下のように2つのデータファイル(data1.txt,data2.txt)があるとする。
```
$ cat data1.txt
1
2
3
$ cat data2.txt
10
15
20
```
    これらの2つのデータファイルの各行をくっつけて以下のようなファイル
    (data3.txt)を出力する方法は? (\$ man paste 参照)
```
$ cat data3.txt
1 10
2 15
3 20
```

## 文字列置換

ストリームエディタsedを使うと、文字列の置換を簡単にできる。
あるファイル中の文字列1を文字列2に置換した内容を出力したいときには以下
を実行する。
```
$ sed -e "s/文字列1/文字列2/g" <ファイル名>
```
上記命令のgを省いたときには，各行で一番はじめにあった文字列1のみが文字
列2に置換される。

1.  あるファイルの空白(スペース)を**すべて**削除する方法は?

2.  あるファイルの連続した5つの空白(スペース)をタブに置換して、その
    結果をファイルに保存する方法は?

3.  あるファイルの各行のはじめにある空白(スペース)およびタブを
    **すべて**削除する方法は?

# パッケージ情報取得(Vine Linux用のコマンド)

以下をrpmコマンドを用いて調べる方法を述べなさい。

1.  コマンドlsを提供するrpmパッケージの名称を知る方法は?

2.  前問で調べたコマンドlsを提供するrpmパッケージに関する情報(説明)を知る方法は?

3.  lsを提供するrpmパッケージに含まれているファイル一覧を知る方法は?


# シェルスクリプトとパス設定

## 準備運動

1.  引数の数、第0引数、第1引数、全ての引数をそれぞれ表示する
    シェルスクリプト arg.sh を作って `arg.sh "a b" 3 a b` の出力が
    どうなるか確認せよ。

2.  arg.shをディレクトリ`~/bin`に置き、どこのディレクトリにいて も
    ’arg.sh’を実行できるよう、パスの設定をせよ。

## ファイル圧縮

1.  指定ディレクトリを圧縮したtar.bz2ファイルをつくるシェルスクリプト
    `bzdir`をつくりなさい。
    すなわち`$ bzdir <ディレクトリ名>`を実行すれば、
    `<ディレクトリ名>.tar.bz2`が出来るスクリプトをつくりなさい。
    ただし、以下の仕様を満たすようにすること。

    1.  作成したプログラムの使用方法を表示してプログラムを終了する関数
        Usageを作成し、引数の数が1個でない時には、その関数Usageを呼び出す
        こと。

    2.  引数で与えた名前のディレクトリが存在しないときには、エラーメッセー
        ジを表示して終了

    3.  システムにあらかじめ用意されているコマンドbzip2dirは用いずに、
        tarを用いて実現すること。

3.  現在いるディレクトリ以下のディレクトリをそれぞれ圧縮するシェル
    スクリプト bzdir2 をつくれ。(`c/`,`tex/`というディレクトリが
    あれば、`c.tar.bz2`,`tex.tar.bz2`をつくる)

4.  引数に `<name>.tar.gz`といった `tar.gz`で終る名前を与え
    たときに、`<name>.tar.bz2`という名前を表示するシェルスクリプトを
    つくりなさい。

5.  現在いるディレクトリにgzipで圧縮されたファイル(\*.gz)があれば、
    bzip2 で圧縮したファイルに変換するスクリプトgz2bz2 をつくりなさい。
    変換前と変換後のファイルサイズも表示するようにしなさい。

# リモート操作

リモート接続可能な計算機 venus があるとして，以下の課題をしなさい。

## 他ホストへの接続

1.  venusにsshでログインするスクリプト`connect`を 作りなさい。

2.  `connect`を`~/bin`に置いて，以下のような名前のシンボリッ
    クリンクを`~/bin`内につくりなさい。

          venus -> connect
          atlas  -> connect

3.  `venus`とコマンドを打てばvenusに接続し，`atlas`と打て
    ばatlasに接続するように、スクリプト`connect`を修正しなさい。


## リモートコピー

1.  自分のノートパソコンにあるCのプログラム(hoge.cとする)を, venus
    上の自分のホームに転送する方法は?

2.  venus にあるファイル`hoge2.c`をvenusから自分のマシンに転送する方法は?

## アクセス権限

研究室ではNFSサーバvenusに共用ディレクトリ `/home/public/`がある。

1.  研究室のマシンにログインしなさい。

2.  `/home/public/tmp`以下に自分の名前のディレクトリ(仮に
    `pochi`とする)を作りなさい。

3.  `/home/public/tmp/pochi`にアクセス権限を持つヒトは誰かを確
    認する方法を述べなさい。
    また、このディレクトリの中のファイル一覧を参照できる権限を持つヒト、
    中のファイル削除や名前変更等ができる権限を持つヒト、中にcd
    できる権限を持つヒトがそれぞれどのようなヒトか述べなさい。

4.  `/home/public/tmp/pochi`に自分の作ったプログラム(dog.cとす
    る)をなにか置いて、それに対して読み込み権限を持つヒト、書き換えや
    削除権限を持つヒトはそれぞれどのようなヒトか述べなさい。

5.  自分と同じグループに属するヒトが
    `/home/public/tmp/pochi/dog.c`を読み書きできるようにパーミションの
    設定をしなさい。

# このドキュメントの著作権について

1.  本稿の著作権は西井淳[nishii@sci.yamaguchi-u.ac.jp](nishii@sci.yamaguchi-u.ac.jp)が有します。

2.  非商用目的での複製は許可しますが、修正を加えた場合は必ず修正点および加筆者の
    氏名・連絡先、修正した日付を明記してください。また本著作権表示の削除は行っ
    てはいけません。

3.  本稿に含まれている間違い等によりなんらかの被害を被ったとしても著者は一切
    責任を負いません。

間違い等の連絡や加筆修正要望等の連絡は大歓迎です。
